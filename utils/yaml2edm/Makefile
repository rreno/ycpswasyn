CC = gcc
CPP = g++
CPP_FLAGS = -Wall -I. -g

######################

PACKAGE_AREA=/afs/slac/g/spear/package

CPSW_FRAMEWORK_PACKAGE_NAME=cpsw/controlGUI/MAIN_TRUNK/cpsw
CPSW_FRAMEWORK_VERSION=
CPSW_FRAMEWORK_ARCH=
CPSW_FRAMEWORK=$(PACKAGE_AREA)/$(CPSW_FRAMEWORK_PACKAGE_NAME)
CPSW_FRAMEWORK_LIB     = $(CPSW_FRAMEWORK)/O.linux-x86_64
CPSW_FRAMEWORK_INCLUDE = $(CPSW_FRAMEWORK)

LINUX_VERSION=rhel6-linux
PACKAGE_AREA=/afs/slac/g/lcls/package

BOOST_PACKAGE_NAME=boost
BOOST_VERSION=1.57.0
BOOST_ARCH=$(LINUX_VERSION)-x86_64
BOOST=$(PACKAGE_AREA)/$(BOOST_PACKAGE_NAME)/$(BOOST_VERSION)/$(BOOST_ARCH)
BOOST_LIB     = $(BOOST)/lib
BOOST_INCLUDE = $(BOOST)/include

YAML_NAME=yaml-cpp
YAML_VERSION=yaml-cpp-0.5.3
YAML_ARCH=linux-x86_64
YAML=$(PACKAGE_AREA)/$(YAML_NAME)/$(YAML_VERSION)/$(YAML_ARCH)
YAML_INCLUDE=$(YAML)/include
YAML_LIB=$(YAML)/lib

CPP_FLAGS += -I$(CPSW_FRAMEWORK_INCLUDE) -I$(BOOST_INCLUDE) -I$(YAML_INCLUDE) -L$(CPSW_FRAMEWORK_LIB) -L$(BOOST_LIB) -L$(YAML_LIB)
CPP_FLAGS += -lcpsw -lboost_system -lyaml-cpp
######################

all: yaml2edm

yaml2edm: yaml2edm.o
	$(CPP) -o $@ $^ $(CPP_FLAGS)

yaml2edm.o: yaml2edm.cpp
	$(CPP) $(CPP_FLAGS) -c $^

clean:
	rm *.o yaml2edm
